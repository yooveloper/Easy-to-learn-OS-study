-----

Chapter11. 파일 시스템

-----

### 01. 파일과 파일 시스템
#### 파일 시스템
운영체제는 사용자가 파일이나 자료를 쉽게 발견 및 접근할 수 있도록  
보관 또는 조직하는 체제인 **파일 시스템**을 가짐
파일 시스템에서 **파일 관리자**는 파일 테이블을 사용하여 파일의 생성, 수정, 삭제 등을 수행하고    
사용자가 파일을 사용하고자 할 때 읽기, 쓰기 실행과 같은 다양한 접근 방법을 제공함  
이때 사용자가 특정 파일에 접근하려면 파일 관리자로부터 **디스크립터**라는 권한(키)을 획득해야함

#### 파일 시스템의 기능
파일 구성, 파일 관리, 접근 권한 관리, 접근 방법 제공, 무결성 보장, 백업과 복구, 암호화  

윈도우의 경우  
FAT, FAT12, FAT16, FAT32, exFAT, NTFS, ext, ext2, HFS

유닉스의 경우
I-node  

#### 블록과 테이블
한 블록에 주소 하나가 할당되고 이 블록은 여러 개의 섹터가 묶여 만들어진 블록  

#### 파일 분류
파일은 0과 1의 비트 패턴으로 이루어짐  
name, type, size 등이 있음

#### 파일 구조
* 순차 파일 구조 : 파일 내용이 하나의 긴 줄로 늘어선 형태
                 ex) 카세트 테이프
* 인덱스 파일 구조 : 순차 파일 구조에 인덱스 테이블을 추가하여 순차 접근이 가능한 형태
                   ex) 플로피디스크, CD-ROM
* 직접 파일 구조 :  
  저장하려는 데이터의 특정 값에 어떤 관계를 정의하여 물리적인 주소로 바로 변환하는 파일 구조  
  다양한 접근이 가능하고 효율적인 검색과 삭제, 삽입 갱신이 가능하다는 장점이 있고,
  접근 시간이 직접 파일보다 느리며, 색인 영역을 위한 기억공간이 필요하다는 단점이 있음


* 실행 파일 : 사용자의 요청으로 프로세스가 된 파일  
* 데이터 파일 : 실행 파일이 작업하는 데 필요한 데이터를 모아놓은 파일  
              ex) 이미지 뷰어 프로그램의 사진 파일, 뮤직 플레이어의 음악 파일 등

### 02. 디렉터리의 구조
#### 디렉터리
관련 있는 파일을 하나로 모아놓은 곳  
하나의 디렉터리에는 여러개의 파일과 자식 디렉터리가 존재함  
여러 층으로 구성할 수 있는데, 이때 최상위에 있는 디렉터리를 루트 디렉터리라고 하며 / 로 표현할 수 있음  

**리눅스 파일 디렉터리 구조**

![리눅스 파일 디렉터리 구조](https://velog.velcdn.com/images%2Fqlgks1%2Fpost%2F89e19c86-9930-4c8f-9a00-6f9cb8cec2a2%2F%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-07-05%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2011.38.03.png)

#### 디렉터리 파일
디렉터리도 파일에 해당함  
디렉터리에는 파일 정보가 담겨있고 디렉터리의 헤더에는  
디렉터리의 이름, 만든 시간, 접근 권한 등의 정보가 기록되어 있음  

마침표 . 한개 파일은 자기 자신의 디렉터리를 가리키고,  
마침표 .. 두개 파일은 상위 디렉터리를 가리킴  

#### 경로
파일이 전체 디렉터리 중 어디에 있는지를 나타내는 정보  
파일 이름 앞에 파일이 속한 경로를 표시하면 어느 위치에 있는 파일인지 명확히 알 수 있음  

* 절대 경로 :  
  루트 디렉터리를 기준으로 파일의 위치를 나타내는 방식
* 상대 경로 :  
  현재 있는 위치를 기준으로 파일의 위치를 나타내는 방식  
  문자로 시작하며, 자신이 위치한 디렉터리를 항상 기준으로 함

디렉터리를 이동하는 경우 cd 명령을 사용
ex) cd ../user

**리눅스 기본 명령어 예시**
* ls : 현재 위치의 파일 목록 조회
* cp : 파일 복사
* mv : 파일 이동
* rm : 파일 삭제
* mkdir : 디렉터리 생성
* cd ~ : 홈 디렉터리로 이동
* cd / : 최상위 디렉터리로 이동
* cd . : 현재 디렉터리
* cd .. : 상위 디렉터리로 이동
* cd - : 이전 경로로 이동

### 03. 디스크 파일 할당
* 연속 할당 : 파일을 구성하는 데이터를 디스크상에 연속적으로 배열하는 간단한 방식
* 불연속 할당 : 비어 있는 블록에 데이터를 분산하여 저장하고 이에 관한 정보를  
  파일 시스템이 관리하는 방식 
* 연결 할당 : 파일에 속한 데이터를 연결 리스트로 관리하는 방식으로 테이블 형태로 관리됨  
* 인덱스 할당 : 연결 리스트를 이용한 불연속 할당 방식의 최대 할당 크기 제한 문제를 해결하기 위해  
  인덱스를 이용한 방식

#### 디스트의 빈 공간 관리
디스크에서 낭비되는 공간을 **내부 단편화**라고 함  
디스크에 파일을 저장할 때마다 모든 테이블을 뒤져서 빈 공간을 찾는 것은 비효율적이기 때문에  
빈 블록의 정보만 모아놓은 빈 공간 리스트를 유지함


### 예상 질문
* 자주 사용하는 리눅스 명령어는 어떤것이 있나요?

### 참고
[리눅스 - 리눅스 파일 시스템 소유권과 권한](https://velog.io/@qlgks1/%EB%A6%AC%EB%88%85%EC%8A%A4-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C)  
[파일 시스템(File System)의 종류와 특징 정리](https://melonicedlatte.com/computerarchitecture/2020/03/02/204500.html)  
[[Linux] 리눅스 기본 명령어 정리](https://cocoon1787.tistory.com/717)